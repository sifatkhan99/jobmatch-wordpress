{"generator":"Code Snippets v3.7.0","date_created":"2025-09-26 10:48","snippets":[{"id":27,"name":"Test Function to Code Snippets","code":"function jobmatch_test_integration() {\n    $results = array();\n    \n    \/\/ Check if your core functions exist\n    $results['Functions'] = array(\n        'notification_function' => function_exists('jobmatch_create_notification'),\n        'scoring_function' => function_exists('jobmatch_calculate_match_score'),\n        'profile_function' => function_exists('jobmatch_get_anonymous_profile'),\n        'cache_class' => class_exists('JobMatch_Cache'),\n        'bg_processor' => class_exists('JobMatch_Background_Processor')\n    );\n    \n    \/\/ Check database tables\n    global $wpdb;\n    $results['Tables'] = array(\n        'match_scores' => $wpdb->get_var(\"SHOW TABLES LIKE '{$wpdb->prefix}match_scores'\") ? 'EXISTS' : 'MISSING',\n        'credit_transactions' => $wpdb->get_var(\"SHOW TABLES LIKE '{$wpdb->prefix}credit_transactions'\") ? 'EXISTS' : 'MISSING',\n        'notifications' => $wpdb->get_var(\"SHOW TABLES LIKE '{$wpdb->prefix}jobmatch_notifications'\") ? 'EXISTS' : 'MISSING',\n        'geo_locations' => $wpdb->get_var(\"SHOW TABLES LIKE '{$wpdb->prefix}geo_locations'\") ? 'EXISTS' : 'MISSING',\n        'match_history' => $wpdb->get_var(\"SHOW TABLES LIKE '{$wpdb->prefix}match_history'\") ? 'EXISTS' : 'MISSING'\n    );\n    \n    \/\/ Check user meta structure\n    $test_user = get_users(array('role' => 'subscriber', 'number' => 1));\n    if (!empty($test_user)) {\n        $user_id = $test_user[0]->ID;\n        $results['User_Meta'] = array(\n            'user_role' => get_user_meta($user_id, 'user_role', true) ? 'SET' : 'NOT SET',\n            'postal_code' => get_user_meta($user_id, 'postal_code', true) ? 'SET' : 'NOT SET',\n            'tech_skills' => get_user_meta($user_id, 'tech_skills', true) ? 'SET' : 'NOT SET'\n        );\n    }\n    \n    \/\/ Check post types\n    $results['Post_Types'] = array(\n        'jobs' => post_type_exists('jobs') ? 'REGISTERED' : 'MISSING',\n        'matches' => post_type_exists('matches') ? 'REGISTERED' : 'MISSING',\n        'messages' => post_type_exists('messages') ? 'REGISTERED' : 'MISSING'\n    );\n    \n    \/\/ Check taxonomies\n    $results['Taxonomies'] = array(\n        'tech_stack' => taxonomy_exists('tech_stack') ? 'REGISTERED' : 'MISSING',\n        'industry' => taxonomy_exists('industry') ? 'REGISTERED' : 'MISSING',\n        'location_region' => taxonomy_exists('location_region') ? 'REGISTERED' : 'MISSING'\n    );\n    \n    return $results;\n}\n\n\/\/ Create a shortcode to display results\nadd_shortcode('jobmatch_integration_test', 'jobmatch_display_integration_test');\n\nfunction jobmatch_display_integration_test() {\n    if (!current_user_can('manage_options')) {\n        return 'Admin access required';\n    }\n    \n    $results = jobmatch_test_integration();\n    \n    ob_start();\n    ?>\n    <div style=\"background: #f5f5f5; padding: 20px; border-radius: 5px;\">\n        <h2>JobMatch Integration Test Results<\/h2>\n        \n        <?php foreach ($results as $category => $items): ?>\n            <h3><?php echo str_replace('_', ' ', $category); ?><\/h3>\n            <ul style=\"list-style: none;\">\n                <?php foreach ($items as $item => $status): ?>\n                    <li>\n                        <?php \n                        $color = ($status === true || $status === 'EXISTS' || $status === 'REGISTERED' || $status === 'SET') ? 'green' : 'red';\n                        $icon = ($status === true || $status === 'EXISTS' || $status === 'REGISTERED' || $status === 'SET') ? '\u2713' : '\u2717';\n                        ?>\n                        <span style=\"color: <?php echo $color; ?>; font-weight: bold;\">\n                            <?php echo $icon; ?>\n                        <\/span>\n                        <?php echo str_replace('_', ' ', $item); ?>: \n                        <strong><?php echo is_bool($status) ? ($status ? 'YES' : 'NO') : $status; ?><\/strong>\n                    <\/li>\n                <?php endforeach; ?>\n            <\/ul>\n        <?php endforeach; ?>\n        \n        <h3>Quick Fix Commands<\/h3>\n        <pre style=\"background: white; padding: 10px; border: 1px solid #ddd;\">\n\/\/ If any functions are missing, check that the relevant Code Snippet is active\n\/\/ If tables are missing, run this in a snippet:\njobmatch_create_custom_tables(); \/\/ Your existing function\n\n\/\/ If post types\/taxonomies are missing:\njobmatch_register_custom_post_types(); \/\/ Your existing function\n        <\/pre>\n    <\/div>\n    <?php\n    return ob_get_clean();\n}","active":true,"modified":"2025-09-24 19:49:48","revision":"1"}]}