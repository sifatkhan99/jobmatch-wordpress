{"generator":"Code Snippets v3.7.0","date_created":"2025-09-26 10:48","snippets":[{"id":33,"name":"Notifications Listing Page","code":"\/\/ Add to a new snippet: \"Notifications Listing Page\"\nadd_shortcode('jobmatch_notifications_list', 'jobmatch_render_notifications_list');\n\nfunction jobmatch_render_notifications_list() {\n    if (!is_user_logged_in()) {\n        return '<p>Please login to view notifications.<\/p>';\n    }\n    \n    global $wpdb;\n    $user_id = get_current_user_id();\n    $table = $wpdb->prefix . 'jobmatch_notifications';\n    \n    \/\/ Mark as read when viewing\n    $wpdb->update($table, array('is_read' => 1), array('user_id' => $user_id));\n    \n    \/\/ Get notifications\n    $notifications = $wpdb->get_results($wpdb->prepare(\n        \"SELECT * FROM $table WHERE user_id = %d ORDER BY created_at DESC LIMIT 50\",\n        $user_id\n    ));\n    \n    ob_start();\n    ?>\n    <div class=\"notifications-list\">\n        <h2>Your Notifications<\/h2>\n        <?php if ($notifications): ?>\n            <?php foreach ($notifications as $notif): ?>\n                <div class=\"notification-item <?php echo $notif->is_read ? 'read' : 'unread'; ?>\">\n                    <h4><?php echo esc_html($notif->title); ?><\/h4>\n                    <p><?php echo esc_html($notif->message); ?><\/p>\n                    <small><?php echo human_time_diff(strtotime($notif->created_at)) . ' ago'; ?><\/small>\n                <\/div>\n            <?php endforeach; ?>\n        <?php else: ?>\n            <p>No notifications yet.<\/p>\n        <?php endif; ?>\n    <\/div>\n    <style>\n    .notification-item {\n        padding: 15px;\n        border-bottom: 1px solid #eee;\n        background: #fff;\n    }\n    .notification-item.unread {\n        background: #f0f4ff;\n        border-left: 3px solid #667eea;\n    }\n    <\/style>\n    <?php\n    return ob_get_clean();\n}","active":true,"modified":"2025-09-24 20:41:51","revision":"1"}]}