{"generator":"Code Snippets v3.7.0","date_created":"2025-09-26 10:48","snippets":[{"id":21,"name":"Onboarding Questionnaire System (Complete Rewrite)","code":"\n\/**\n * Onboarding Questionnaire System\n * Add this to Code Snippets plugin\n * Use shortcode [jobmatch_onboarding] on your Onboarding page\n *\/\n\n\/\/ Onboarding questionnaire shortcode\nadd_shortcode('jobmatch_onboarding', 'jobmatch_onboarding_form');\n\nfunction jobmatch_onboarding_form($atts) {\n    \/\/ Security check\n    if (!is_user_logged_in()) {\n        return '<p>Please <a href=\"' . wp_login_url() . '\">log in<\/a> to complete your profile.<\/p>';\n    }\n    \n    $current_user = wp_get_current_user();\n    $user_id = $current_user->ID;\n    $user_role = get_user_meta($user_id, 'user_role', true);\n    \n    if (!$user_role) {\n        return '<p>Invalid user role. Please contact support.<\/p>';\n    }\n    \n    \/\/ Check if already completed\n    $onboarding_complete = get_user_meta($user_id, 'onboarding_complete', true);\n    if ($onboarding_complete) {\n        $dashboard_url = ($user_role === 'developer') ? \n            home_url('\/developer-dashboard\/') : \n            home_url('\/company-dashboard\/');\n        wp_redirect($dashboard_url);\n        exit;\n    }\n    \n    \/\/ Process form submission\n    if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['onboarding_nonce'])) {\n        $result = jobmatch_process_onboarding($_POST, $user_id, $user_role);\n        if ($result['success']) {\n            wp_redirect($result['redirect']);\n            exit;\n        } else {\n            $error_message = $result['message'];\n        }\n    }\n    \n    ob_start();\n    ?>\n    \n    <div class=\"onboarding-container\">\n        <div class=\"onboarding-header\">\n            <h1>Complete Your Profile<\/h1>\n            <p>Help us match you with the perfect <?php echo $user_role === 'developer' ? 'opportunities' : 'talent'; ?><\/p>\n            <div class=\"progress-bar\">\n                <div class=\"progress-fill\" id=\"progressFill\"><\/div>\n            <\/div>\n        <\/div>\n        \n        <?php if (isset($error_message)): ?>\n            <div class=\"alert alert-error\"><?php echo esc_html($error_message); ?><\/div>\n        <?php endif; ?>\n        \n        <form method=\"POST\" class=\"onboarding-form\" id=\"onboardingForm\">\n            <?php wp_nonce_field('onboarding', 'onboarding_nonce'); ?>\n            \n            <!-- Step 1: Basic Information -->\n            <div class=\"onboarding-step active\" data-step=\"1\">\n                <h2>Tell us about yourself<\/h2>\n                \n                <?php if ($user_role === 'developer'): ?>\n                    <div class=\"form-group\">\n                        <label for=\"experience_level\">Experience Level *<\/label>\n                        <select id=\"experience_level\" name=\"experience_level\" required>\n                            <option value=\"\">Select your experience level<\/option>\n                            <option value=\"junior\">Junior (0-2 years)<\/option>\n                            <option value=\"mid\">Mid-level (2-5 years)<\/option>\n                            <option value=\"senior\">Senior (5+ years)<\/option>\n                            <option value=\"lead\">Lead\/Architect (8+ years)<\/option>\n                        <\/select>\n                    <\/div>\n                    \n                    <div class=\"form-group\">\n                        <label for=\"salary_expectation\">Salary Expectation (\u20ac\/year) *<\/label>\n                        <input type=\"number\" id=\"salary_expectation\" name=\"salary_expectation\" required \n                               min=\"30000\" max=\"200000\" step=\"1000\" placeholder=\"65000\">\n                        <small>This helps us match you with suitable opportunities<\/small>\n                    <\/div>\n                    \n                    <div class=\"form-group\">\n                        <label>Work Preference *<\/label>\n                        <div class=\"radio-group\">\n                            <label class=\"radio-option\">\n                                <input type=\"radio\" name=\"work_preference\" value=\"remote\" required>\n                                <span class=\"radio-content\">\n                                    <span class=\"radio-icon\">\ud83c\udf0d<\/span>\n                                    <span class=\"radio-text\">\n                                        <strong>Remote Only<\/strong>\n                                        <small>Work from anywhere<\/small>\n                                    <\/span>\n                                <\/span>\n                            <\/label>\n                            \n                            <label class=\"radio-option\">\n                                <input type=\"radio\" name=\"work_preference\" value=\"hybrid\" required>\n                                <span class=\"radio-content\">\n                                    <span class=\"radio-icon\">\ud83c\udfe2<\/span>\n                                    <span class=\"radio-text\">\n                                        <strong>Hybrid<\/strong>\n                                        <small>Mix of office and remote<\/small>\n                                    <\/span>\n                                <\/span>\n                            <\/label>\n                            \n                            <label class=\"radio-option\">\n                                <input type=\"radio\" name=\"work_preference\" value=\"onsite\" required>\n                                <span class=\"radio-content\">\n                                    <span class=\"radio-icon\">\ud83c\udfdb\ufe0f<\/span>\n                                    <span class=\"radio-text\">\n                                        <strong>On-site<\/strong>\n                                        <small>Office-based work<\/small>\n                                    <\/span>\n                                <\/span>\n                            <\/label>\n                        <\/div>\n                    <\/div>\n                    \n                <?php else: \/\/ Company ?>\n                    <div class=\"form-group\">\n                        <label for=\"real_company_name\">Company Name *<\/label>\n                        <input type=\"text\" id=\"real_company_name\" name=\"real_company_name\" required\n                               placeholder=\"Your official company name\">\n                        <small>This will only be revealed after mutual matches<\/small>\n                    <\/div>\n                    \n                    <div class=\"form-group\">\n                        <label for=\"company_size\">Company Size *<\/label>\n                        <select id=\"company_size\" name=\"company_size\" required>\n                            <option value=\"\">Select company size<\/option>\n                            <option value=\"1-10\">1-10 employees<\/option>\n                            <option value=\"10-50\">10-50 employees<\/option>\n                            <option value=\"50-200\">50-200 employees<\/option>\n                            <option value=\"200-1000\">200-1000 employees<\/option>\n                            <option value=\"1000+\">1000+ employees<\/option>\n                        <\/select>\n                    <\/div>\n                    \n                    <div class=\"form-group\">\n                        <label for=\"industry\">Industry *<\/label>\n                        <select id=\"industry\" name=\"industry\" required>\n                            <option value=\"\">Select your industry<\/option>\n                            <option value=\"technology\">Technology<\/option>\n                            <option value=\"finance\">Finance<\/option>\n                            <option value=\"healthcare\">Healthcare<\/option>\n                            <option value=\"ecommerce\">E-commerce<\/option>\n                            <option value=\"manufacturing\">Manufacturing<\/option>\n                            <option value=\"education\">Education<\/option>\n                            <option value=\"media\">Media<\/option>\n                            <option value=\"consulting\">Consulting<\/option>\n                        <\/select>\n                    <\/div>\n                    \n                    <div class=\"form-group\">\n                        <label for=\"real_website\">Company Website<\/label>\n                        <input type=\"url\" id=\"real_website\" name=\"real_website\" \n                               placeholder=\"https:\/\/yourcompany.com\">\n                        <small>Optional - helps developers learn about your company<\/small>\n                    <\/div>\n                <?php endif; ?>\n                \n                <div class=\"form-group\">\n                    <label for=\"postal_code\">Postal Code *<\/label>\n                    <input type=\"text\" id=\"postal_code\" name=\"postal_code\" required \n                           placeholder=\"10115\" maxlength=\"10\">\n                    <small>Used for location-based matching<\/small>\n                <\/div>\n            <\/div>\n            \n            <!-- Step 2: Tech Skills -->\n            <div class=\"onboarding-step\" data-step=\"2\">\n                <?php if ($user_role === 'developer'): ?>\n                    <h2>Your Technical Skills<\/h2>\n                    <p>Select all technologies you have experience with (minimum 3)<\/p>\n                <?php else: ?>\n                    <h2>Technology Stack<\/h2>\n                    <p>Select technologies your company commonly uses (minimum 3)<\/p>\n                <?php endif; ?>\n                \n                <div class=\"tech-selection\">\n                    <?php\n                    $tech_categories = array(\n                        'Frontend' => array('React', 'Vue.js', 'Angular', 'JavaScript', 'TypeScript', 'HTML\/CSS'),\n                        'Backend' => array('Node.js', 'Python', 'PHP', 'Java', 'C#', 'Ruby', 'Go'),\n                        'Mobile' => array('React Native', 'Flutter', 'iOS', 'Android', 'Swift', 'Kotlin'),\n                        'DevOps' => array('AWS', 'Docker', 'Kubernetes', 'Azure', 'GCP', 'Jenkins'),\n                        'Database' => array('PostgreSQL', 'MongoDB', 'MySQL', 'Redis', 'Elasticsearch'),\n                        'Other' => array('Git', 'Linux', 'Agile', 'Machine Learning', 'Blockchain')\n                    );\n                    \n                    foreach ($tech_categories as $category => $technologies):\n                    ?>\n                        <div class=\"tech-category\">\n                            <h4><?php echo $category; ?><\/h4>\n                            <div class=\"tech-grid\">\n                                <?php foreach ($technologies as $tech): ?>\n                                    <label class=\"tech-item\">\n                                        <input type=\"checkbox\" name=\"tech_skills[]\" value=\"<?php echo esc_attr(sanitize_title($tech)); ?>\">\n                                        <span class=\"tech-label\"><?php echo $tech; ?><\/span>\n                                    <\/label>\n                                <?php endforeach; ?>\n                            <\/div>\n                        <\/div>\n                    <?php endforeach; ?>\n                <\/div>\n                \n                <div class=\"selection-count\">\n                    Selected: <span id=\"techCount\">0<\/span> (minimum 3 required)\n                <\/div>\n            <\/div>\n            \n            <!-- Step 3: Culture & Values -->\n            <div class=\"onboarding-step\" data-step=\"3\">\n                <h2>Culture & Values<\/h2>\n                <p>Help us understand your work preferences and values<\/p>\n                \n                <?php\n                $culture_questions = jobmatch_get_culture_questions();\n                foreach ($culture_questions as $question_id => $question_data):\n                ?>\n                    <div class=\"culture-question\">\n                        <h4><?php echo esc_html($question_data['question']); ?><\/h4>\n                        \n                        <?php if ($question_data['type'] === 'scale'): ?>\n                            <div class=\"scale-input\">\n                                <div class=\"scale-labels\">\n                                    <span><?php echo $question_data['labels'][1]; ?><\/span>\n                                    <span><?php echo $question_data['labels'][5]; ?><\/span>\n                                <\/div>\n                                <div class=\"scale-options\">\n                                    <?php for ($i = 1; $i <= 5; $i++): ?>\n                                        <label class=\"scale-option\">\n                                            <input type=\"radio\" name=\"culture_answers[<?php echo $question_id; ?>]\" value=\"<?php echo $i; ?>\" required>\n                                            <span class=\"scale-number\"><?php echo $i; ?><\/span>\n                                        <\/label>\n                                    <?php endfor; ?>\n                                <\/div>\n                            <\/div>\n                        <?php else: ?>\n                            <div class=\"choice-options\">\n                                <?php foreach ($question_data['options'] as $value => $label): ?>\n                                    <label class=\"choice-option\">\n                                        <input type=\"radio\" name=\"culture_answers[<?php echo $question_id; ?>]\" value=\"<?php echo esc_attr($value); ?>\" required>\n                                        <span class=\"choice-label\"><?php echo esc_html($label); ?><\/span>\n                                    <\/label>\n                                <?php endforeach; ?>\n                            <\/div>\n                        <?php endif; ?>\n                    <\/div>\n                <?php endforeach; ?>\n            <\/div>\n            \n            <!-- Step 4: Final Details -->\n            <div class=\"onboarding-step\" data-step=\"4\">\n                <h2>Almost Done!<\/h2>\n                \n                <div class=\"form-group\">\n                    <label for=\"profile_summary\">Profile Summary<\/label>\n                    <textarea id=\"profile_summary\" name=\"profile_summary\" rows=\"4\" \n                              placeholder=\"Tell us a bit about yourself and what you're looking for...\"><\/textarea>\n                    <small>Optional - helps with better matching<\/small>\n                <\/div>\n                \n                <?php if ($user_role === 'developer'): ?>\n                    <div class=\"form-group\">\n                        <label for=\"linkedin_profile\">LinkedIn Profile<\/label>\n                        <input type=\"url\" id=\"linkedin_profile\" name=\"linkedin_profile\" \n                               placeholder=\"https:\/\/linkedin.com\/in\/yourprofile\">\n                        <small>Will be revealed only after mutual matches<\/small>\n                    <\/div>\n                    \n                    <div class=\"form-group\">\n                        <label for=\"portfolio_url\">Portfolio URL<\/label>\n                        <input type=\"url\" id=\"portfolio_url\" name=\"portfolio_url\" \n                               placeholder=\"https:\/\/yourportfolio.com\">\n                    <\/div>\n                    \n                    <div class=\"form-group\">\n                        <label for=\"github_profile\">GitHub Profile<\/label>\n                        <input type=\"url\" id=\"github_profile\" name=\"github_profile\" \n                               placeholder=\"https:\/\/github.com\/yourusername\">\n                    <\/div>\n                <?php else: ?>\n                    <div class=\"form-group\">\n                        <label for=\"company_description\">Company Description<\/label>\n                        <textarea id=\"company_description\" name=\"company_description\" rows=\"4\" \n                                  placeholder=\"Describe your company, culture, and what makes it special...\"><\/textarea>\n                    <\/div>\n                <?php endif; ?>\n                \n                <div class=\"form-group\">\n                    <label class=\"checkbox-wrapper\">\n                        <input type=\"checkbox\" name=\"email_notifications_enabled\" value=\"yes\" checked>\n                        <span class=\"checkbox-text\">Send me email notifications for matches and messages<\/span>\n                    <\/label>\n                <\/div>\n                \n                <div class=\"completion-summary\">\n                    <h3>\ud83c\udf89 You're all set!<\/h3>\n                    <p>Your profile is now complete and you'll start receiving matches based on your preferences.<\/p>\n                <\/div>\n            <\/div>\n            \n            <!-- Navigation buttons -->\n            <div class=\"onboarding-navigation\">\n                <button type=\"button\" class=\"btn-prev\" onclick=\"prevStep()\" style=\"display:none;\">Previous<\/button>\n                <button type=\"button\" class=\"btn-next\" onclick=\"nextStep()\">Next<\/button>\n                <button type=\"submit\" class=\"btn-complete\" style=\"display:none;\">Complete Profile<\/button>\n            <\/div>\n        <\/form>\n    <\/div>\n    \n    <?php \n    jobmatch_onboarding_scripts();\n    jobmatch_onboarding_styles();\n    return ob_get_clean();\n}\n\n\/\/ JavaScript for onboarding form\nfunction jobmatch_onboarding_scripts() {\n    ?>\n    <script>\n    let currentStep = 1;\n    const totalSteps = 4;\n    \n    document.addEventListener('DOMContentLoaded', function() {\n        updateProgress();\n        \n        \/\/ Tech skills counter\n        const techCheckboxes = document.querySelectorAll('input[name=\"tech_skills[]\"]');\n        techCheckboxes.forEach(checkbox => {\n            checkbox.addEventListener('change', updateTechCount);\n        });\n        \n        updateTechCount();\n    });\n    \n    function nextStep() {\n        if (!validateCurrentStep()) {\n            return;\n        }\n        \n        if (currentStep < totalSteps) {\n            document.querySelector(`[data-step=\"${currentStep}\"]`).classList.remove('active');\n            currentStep++;\n            document.querySelector(`[data-step=\"${currentStep}\"]`).classList.add('active');\n            updateNavigation();\n            updateProgress();\n            scrollToTop();\n        }\n    }\n    \n    function prevStep() {\n        if (currentStep > 1) {\n            document.querySelector(`[data-step=\"${currentStep}\"]`).classList.remove('active');\n            currentStep--;\n            document.querySelector(`[data-step=\"${currentStep}\"]`).classList.add('active');\n            updateNavigation();\n            updateProgress();\n            scrollToTop();\n        }\n    }\n    \n    function updateNavigation() {\n        const prevBtn = document.querySelector('.btn-prev');\n        const nextBtn = document.querySelector('.btn-next');\n        const completeBtn = document.querySelector('.btn-complete');\n        \n        prevBtn.style.display = currentStep > 1 ? 'block' : 'none';\n        \n        if (currentStep === totalSteps) {\n            nextBtn.style.display = 'none';\n            completeBtn.style.display = 'block';\n        } else {\n            nextBtn.style.display = 'block';\n            completeBtn.style.display = 'none';\n        }\n    }\n    \n    function updateProgress() {\n        const progress = (currentStep \/ totalSteps) * 100;\n        document.getElementById('progressFill').style.width = progress + '%';\n    }\n    \n    function validateCurrentStep() {\n        const currentStepElement = document.querySelector(`[data-step=\"${currentStep}\"]`);\n        const requiredFields = currentStepElement.querySelectorAll('[required]');\n        \n        let valid = true;\n        \n        \/\/ Remove previous error styling\n        currentStepElement.querySelectorAll('.error').forEach(el => {\n            el.classList.remove('error');\n        });\n        \n        requiredFields.forEach(field => {\n            if (field.type === 'radio') {\n                const radioGroup = currentStepElement.querySelectorAll(`[name=\"${field.name}\"]`);\n                const checked = Array.from(radioGroup).some(radio => radio.checked);\n                if (!checked) {\n                    field.closest('.form-group, .culture-question').classList.add('error');\n                    valid = false;\n                }\n            } else if (field.type === 'checkbox' && field.name === 'tech_skills[]') {\n                const checkedTech = document.querySelectorAll('input[name=\"tech_skills[]\"]:checked');\n                if (currentStep === 2 && checkedTech.length < 3) {\n                    document.querySelector('.tech-selection').classList.add('error');\n                    alert('Please select at least 3 technologies');\n                    valid = false;\n                }\n            } else if (!field.value.trim()) {\n                field.classList.add('error');\n                valid = false;\n            }\n        });\n        \n        return valid;\n    }\n    \n    function updateTechCount() {\n        const checkedTech = document.querySelectorAll('input[name=\"tech_skills[]\"]:checked');\n        const countElement = document.getElementById('techCount');\n        if (countElement) {\n            countElement.textContent = checkedTech.length;\n        }\n    }\n    \n    function scrollToTop() {\n        const container = document.querySelector('.onboarding-container');\n        if (container) {\n            container.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n    }\n    <\/script>\n    <?php\n}\n\n\/\/ CSS styles for onboarding\nfunction jobmatch_onboarding_styles() {\n    ?>\n    <style>\n    .onboarding-container {\n        max-width: 800px;\n        margin: 0 auto;\n        padding: 20px;\n    }\n    \n    .onboarding-header {\n        text-align: center;\n        margin-bottom: 40px;\n    }\n    \n    .onboarding-header h1 {\n        margin: 0 0 10px 0;\n        color: #333;\n        font-size: 2rem;\n    }\n    \n    .onboarding-header p {\n        color: #666;\n        font-size: 1.1rem;\n        margin-bottom: 30px;\n    }\n    \n    .progress-bar {\n        height: 6px;\n        background: #e9ecef;\n        border-radius: 3px;\n        overflow: hidden;\n        margin-bottom: 20px;\n    }\n    \n    .progress-fill {\n        height: 100%;\n        background: linear-gradient(135deg, #667eea, #764ba2);\n        transition: width 0.5s ease;\n        width: 25%;\n    }\n    \n    .onboarding-form {\n        background: white;\n        border-radius: 20px;\n        box-shadow: 0 4px 20px rgba(0,0,0,0.1);\n        overflow: hidden;\n    }\n    \n    .onboarding-step {\n        padding: 40px;\n        display: none;\n    }\n    \n    .onboarding-step.active {\n        display: block;\n    }\n    \n    .onboarding-step h2 {\n        margin: 0 0 20px 0;\n        color: #333;\n        font-size: 1.5rem;\n    }\n    \n    .form-group {\n        margin-bottom: 25px;\n    }\n    \n    .form-group label {\n        display: block;\n        font-weight: 600;\n        margin-bottom: 8px;\n        color: #333;\n    }\n    \n    .form-group input,\n    .form-group select,\n    .form-group textarea {\n        width: 100%;\n        padding: 12px 16px;\n        border: 2px solid #e9ecef;\n        border-radius: 10px;\n        font-size: 1rem;\n        transition: border-color 0.3s ease;\n    }\n    \n    .form-group input:focus,\n    .form-group select:focus,\n    .form-group textarea:focus {\n        outline: none;\n        border-color: #667eea;\n    }\n    \n    .form-group.error input,\n    .form-group.error select,\n    .form-group.error textarea {\n        border-color: #dc3545;\n    }\n    \n    .form-group small {\n        display: block;\n        color: #6c757d;\n        font-size: 0.85rem;\n        margin-top: 5px;\n    }\n    \n    .radio-group {\n        display: flex;\n        flex-direction: column;\n        gap: 15px;\n    }\n    \n    .radio-option {\n        border: 2px solid #e9ecef;\n        border-radius: 12px;\n        padding: 20px;\n        cursor: pointer;\n        transition: all 0.3s ease;\n        display: block;\n    }\n    \n    .radio-option:hover {\n        border-color: #667eea;\n        background: #f8f9fa;\n    }\n    \n    .radio-option input[type=\"radio\"] {\n        display: none;\n    }\n    \n    .radio-option:has(input:checked) {\n        border-color: #667eea;\n        background: rgba(102, 126, 234, 0.05);\n    }\n    \n    .radio-content {\n        display: flex;\n        align-items: center;\n        gap: 15px;\n    }\n    \n    .radio-icon {\n        font-size: 2rem;\n        flex-shrink: 0;\n    }\n    \n    .radio-text strong {\n        display: block;\n        font-size: 1.1rem;\n        margin-bottom: 3px;\n    }\n    \n    .radio-text small {\n        color: #666;\n        font-size: 0.9rem;\n    }\n    \n    .tech-selection {\n        background: #f8f9fa;\n        padding: 30px;\n        border-radius: 15px;\n        margin-bottom: 20px;\n    }\n    \n    .tech-selection.error {\n        border: 2px solid #dc3545;\n    }\n    \n    .tech-category {\n        margin-bottom: 30px;\n    }\n    \n    .tech-category:last-child {\n        margin-bottom: 0;\n    }\n    \n    .tech-category h4 {\n        margin: 0 0 15px 0;\n        color: #333;\n        font-size: 1.1rem;\n        border-bottom: 2px solid #667eea;\n        padding-bottom: 5px;\n    }\n    \n    .tech-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\n        gap: 12px;\n    }\n    \n    .tech-item {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n        padding: 10px;\n        background: white;\n        border: 2px solid #e9ecef;\n        border-radius: 8px;\n        cursor: pointer;\n        transition: all 0.3s ease;\n    }\n    \n    .tech-item:hover {\n        border-color: #667eea;\n        background: rgba(102, 126, 234, 0.05);\n    }\n    \n    .tech-item:has(input:checked) {\n        border-color: #667eea;\n        background: rgba(102, 126, 234, 0.1);\n    }\n    \n    .tech-item input[type=\"checkbox\"] {\n        width: auto;\n        margin: 0;\n    }\n    \n    .tech-label {\n        font-weight: 500;\n        color: #333;\n    }\n    \n    .selection-count {\n        text-align: center;\n        font-weight: bold;\n        color: #667eea;\n        font-size: 1.1rem;\n    }\n    \n    .culture-question {\n        margin-bottom: 30px;\n        padding: 25px;\n        background: #f8f9fa;\n        border-radius: 12px;\n    }\n    \n    .culture-question.error {\n        border: 2px solid #dc3545;\n    }\n    \n    .culture-question h4 {\n        margin: 0 0 15px 0;\n        color: #333;\n    }\n    \n    .scale-input {\n        text-align: center;\n    }\n    \n    .scale-labels {\n        display: flex;\n        justify-content: space-between;\n        margin-bottom: 15px;\n        font-size: 0.9rem;\n        color: #666;\n    }\n    \n    .scale-options {\n        display: flex;\n        justify-content: center;\n        gap: 15px;\n    }\n    \n    .scale-option {\n        cursor: pointer;\n    }\n    \n    .scale-option input[type=\"radio\"] {\n        display: none;\n    }\n    \n    .scale-number {\n        display: block;\n        width: 40px;\n        height: 40px;\n        border: 2px solid #e9ecef;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-weight: bold;\n        transition: all 0.3s ease;\n    }\n    \n    .scale-option input[type=\"radio\"]:checked + .scale-number {\n        background: #667eea;\n        border-color: #667eea;\n        color: white;\n    }\n    \n    .choice-options {\n        display: grid;\n        grid-template-columns: repeat(2, 1fr);\n        gap: 12px;\n    }\n    \n    .choice-option {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n        padding: 12px;\n        border: 2px solid #e9ecef;\n        border-radius: 8px;\n        cursor: pointer;\n        transition: all 0.3s ease;\n    }\n    \n    .choice-option:hover {\n        border-color: #667eea;\n        background: rgba(102, 126, 234, 0.05);\n    }\n    \n    .choice-option:has(input:checked) {\n        border-color: #667eea;\n        background: rgba(102, 126, 234, 0.1);\n    }\n    \n    .choice-option input[type=\"radio\"] {\n        width: auto;\n        margin: 0;\n    }\n    \n    .choice-label {\n        font-weight: 500;\n        color: #333;\n    }\n    \n    .checkbox-wrapper {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n        cursor: pointer;\n    }\n    \n    .checkbox-wrapper input[type=\"checkbox\"] {\n        width: auto;\n        margin: 0;\n    }\n    \n    .completion-summary {\n        text-align: center;\n        padding: 30px;\n        background: linear-gradient(135deg, #e3f2fd, #f3e5f5);\n        border-radius: 15px;\n        margin-top: 20px;\n    }\n    \n    .completion-summary h3 {\n        margin: 0 0 10px 0;\n        color: #333;\n    }\n    \n    .onboarding-navigation {\n        padding: 30px 40px;\n        background: #f8f9fa;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n    }\n    \n    .btn-prev,\n    .btn-next,\n    .btn-complete {\n        padding: 12px 24px;\n        border: none;\n        border-radius: 25px;\n        font-weight: bold;\n        cursor: pointer;\n        font-size: 1rem;\n        transition: all 0.3s ease;\n    }\n    \n    .btn-prev {\n        background: #6c757d;\n        color: white;\n    }\n    \n    .btn-next,\n    .btn-complete {\n        background: linear-gradient(135deg, #667eea, #764ba2);\n        color: white;\n        margin-left: auto;\n    }\n    \n    .btn-next:hover,\n    .btn-complete:hover {\n        transform: translateY(-2px);\n        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);\n    }\n    \n    .alert {\n        padding: 15px 20px;\n        border-radius: 8px;\n        margin-bottom: 25px;\n    }\n    \n    .alert-error {\n        background: #f8d7da;\n        color: #721c24;\n        border: 1px solid #f5c6cb;\n    }\n    \n    @media (max-width: 768px) {\n        .onboarding-container {\n            padding: 10px;\n        }\n        \n        .onboarding-step {\n            padding: 20px;\n        }\n        \n        .tech-grid {\n            grid-template-columns: 1fr;\n        }\n        \n        .choice-options {\n            grid-template-columns: 1fr;\n        }\n        \n        .radio-group {\n            gap: 10px;\n        }\n        \n        .radio-option {\n            padding: 15px;\n        }\n        \n        .onboarding-navigation {\n            padding: 20px;\n            flex-direction: column;\n            gap: 15px;\n        }\n        \n        .btn-prev,\n        .btn-next,\n        .btn-complete {\n            width: 100%;\n        }\n        \n        .btn-next,\n        .btn-complete {\n            margin-left: 0;\n        }\n    }\n    <\/style>\n    <?php\n}\n\n\/\/ Process onboarding form submission\nfunction jobmatch_process_onboarding($data, $user_id, $user_role) {\n    \/\/ Verify nonce\n    if (!wp_verify_nonce($data['onboarding_nonce'], 'onboarding')) {\n        return array('success' => false, 'message' => 'Security verification failed.');\n    }\n    \n    \/\/ Validate required fields based on role\n    $required_fields = array('postal_code');\n    \n    if ($user_role === 'developer') {\n        $required_fields = array_merge($required_fields, array(\n            'experience_level', 'salary_expectation', 'work_preference'\n        ));\n    } else {\n        $required_fields = array_merge($required_fields, array(\n            'real_company_name', 'company_size', 'industry'\n        ));\n    }\n    \n    foreach ($required_fields as $field) {\n        if (empty($data[$field])) {\n            return array('success' => false, 'message' => 'Please fill in all required fields.');\n        }\n    }\n    \n    \/\/ Validate tech skills (minimum 3)\n    if (empty($data['tech_skills']) || count($data['tech_skills']) < 3) {\n        return array('success' => false, 'message' => 'Please select at least 3 technologies.');\n    }\n    \n    \/\/ Validate culture answers\n    if (empty($data['culture_answers']) || !is_array($data['culture_answers'])) {\n        return array('success' => false, 'message' => 'Please answer all culture questions.');\n    }\n    \n    \/\/ Save all data\n    if ($user_role === 'developer') {\n        update_user_meta($user_id, 'experience_level', sanitize_text_field($data['experience_level']));\n        update_user_meta($user_id, 'salary_expectation', intval($data['salary_expectation']));\n        update_user_meta($user_id, 'work_preference', sanitize_text_field($data['work_preference']));\n        \n        if (!empty($data['linkedin_profile'])) {\n            update_user_meta($user_id, 'linkedin_profile', esc_url_raw($data['linkedin_profile']));\n        }\n        if (!empty($data['portfolio_url'])) {\n            update_user_meta($user_id, 'portfolio_url', esc_url_raw($data['portfolio_url']));\n        }\n        if (!empty($data['github_profile'])) {\n            update_user_meta($user_id, 'github_profile', esc_url_raw($data['github_profile']));\n        }\n    } else {\n        update_user_meta($user_id, 'real_company_name', sanitize_text_field($data['real_company_name']));\n        update_user_meta($user_id, 'company_size', sanitize_text_field($data['company_size']));\n        update_user_meta($user_id, 'industry', sanitize_text_field($data['industry']));\n        \n        if (!empty($data['real_website'])) {\n            update_user_meta($user_id, 'real_website', esc_url_raw($data['real_website']));\n        }\n        if (!empty($data['company_description'])) {\n            update_user_meta($user_id, 'company_description', wp_kses_post($data['company_description']));\n        }\n    }\n    \n    \/\/ Save common fields\n    update_user_meta($user_id, 'postal_code', sanitize_text_field($data['postal_code']));\n    update_user_meta($user_id, 'tech_skills', array_map('sanitize_text_field', $data['tech_skills']));\n    update_user_meta($user_id, 'culture_answers', array_map('sanitize_text_field', $data['culture_answers']));\n    \n    if (!empty($data['profile_summary'])) {\n        update_user_meta($user_id, 'profile_summary', wp_kses_post($data['profile_summary']));\n    }\n    \n    $email_notifications = isset($data['email_notifications_enabled']) && $data['email_notifications_enabled'] === 'yes';\n    update_user_meta($user_id, 'email_notifications_enabled', $email_notifications ? 'yes' : 'no');\n    \n    \/\/ Mark onboarding as complete\n    update_user_meta($user_id, 'onboarding_complete', true);\n    \n    \/\/ Redirect to dashboard\n    $redirect = ($user_role === 'developer') ? \n        home_url('\/developer-dashboard\/?welcome=1') : \n        home_url('\/company-dashboard\/?welcome=1');\n    \n    return array('success' => true, 'redirect' => $redirect);\n}\n\n\/\/ Redirect incomplete profiles to onboarding\nadd_action('template_redirect', 'jobmatch_check_onboarding_redirect');\nfunction jobmatch_check_onboarding_redirect() {\n    if (!is_user_logged_in()) {\n        return;\n    }\n    \n    $user_id = get_current_user_id();\n    $user_role = get_user_meta($user_id, 'user_role', true);\n    $onboarding_complete = get_user_meta($user_id, 'onboarding_complete', true);\n    \n    \/\/ Skip redirect for admin, login, onboarding, and logout pages\n    if (is_admin() || \n        is_page('login') || \n        is_page('onboarding') || \n        strpos($_SERVER['REQUEST_URI'], 'wp-login') !== false ||\n        strpos($_SERVER['REQUEST_URI'], 'wp-admin') !== false) {\n        return;\n    }\n    \n    \/\/ If user has a role but onboarding not complete, redirect\n    if ($user_role && !$onboarding_complete) {\n        wp_redirect(home_url('\/onboarding\/'));\n        exit;\n    }\n}","active":true,"modified":"2025-09-24 19:03:48","revision":"1"}]}